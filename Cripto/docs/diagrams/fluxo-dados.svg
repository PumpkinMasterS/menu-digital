<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="560" viewBox="0 0 1000 560" font-family="Inter, Arial, sans-serif">
  <style>
    .box { fill: #ffffff; stroke: #1f2937; stroke-width: 1.2; rx: 8; ry: 8; }
    .title { font-size: 14px; font-weight: 700; fill: #111827; }
    .text { font-size: 12px; fill: #374151; }
    .arrow { stroke: #111827; stroke-width: 1.4; fill: none; marker-end: url(#arrowhead); }
    .note { font-size: 11px; fill: #6b7280; font-style: italic; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#111827"></polygon>
    </marker>
  </defs>

  <!-- Row 1 -->
  <g transform="translate(20,40)">
    <rect class="box" x="0" y="0" width="180" height="80" />
    <text class="title" x="90" y="24" text-anchor="middle">Exchanges</text>
    <text class="text" x="90" y="44" text-anchor="middle">WS / REST</text>
    <text class="note" x="90" y="62" text-anchor="middle">Bybit · Binance · Coinbase</text>
  </g>

  <g transform="translate(230,40)">
    <rect class="box" x="0" y="0" width="210" height="80" />
    <text class="title" x="105" y="24" text-anchor="middle">Buffers</text>
    <text class="text" x="105" y="44" text-anchor="middle">símbolo + timeframe</text>
    <text class="note" x="105" y="62" text-anchor="middle">1m · 3m · 5m · 10m · 15m · 1h · 4h</text>
  </g>

  <g transform="translate(470,40)">
    <rect class="box" x="0" y="0" width="230" height="80" />
    <text class="title" x="115" y="24" text-anchor="middle">Resampling</text>
    <text class="text" x="115" y="44" text-anchor="middle">determinístico · UTC</text>
    <text class="note" x="115" y="62" text-anchor="middle">1m→3m · 1m/5m→10m · 1h→4h</text>
  </g>

  <g transform="translate(730,40)">
    <rect class="box" x="0" y="0" width="230" height="80" />
    <text class="title" x="115" y="24" text-anchor="middle">Indicadores</text>
    <text class="text" x="115" y="44" text-anchor="middle">RSI · EMA · ATR · MACD · ...</text>
  </g>

  <!-- Row 2 -->
  <g transform="translate(120,200)">
    <rect class="box" x="0" y="0" width="230" height="80" />
    <text class="title" x="115" y="24" text-anchor="middle">Sinais</text>
    <text class="text" x="115" y="44" text-anchor="middle">BUY / SELL / HOLD</text>
  </g>

  <g transform="translate(380,200)">
    <rect class="box" x="0" y="0" width="210" height="80" />
    <text class="title" x="105" y="24" text-anchor="middle">Fila</text>
    <text class="text" x="105" y="44" text-anchor="middle">BullMQ / Redis</text>
  </g>

  <g transform="translate(610,200)">
    <rect class="box" x="0" y="0" width="210" height="80" />
    <text class="title" x="105" y="24" text-anchor="middle">Execução</text>
    <text class="text" x="105" y="44" text-anchor="middle">Ordens · SL/TP · Risco</text>
  </g>

  <!-- Persistence and Dashboard -->
  <g transform="translate(120,360)">
    <rect class="box" x="0" y="0" width="280" height="90" />
    <text class="title" x="140" y="24" text-anchor="middle">Persistência</text>
    <text class="text" x="140" y="44" text-anchor="middle">TimescaleDB · Redis · MongoDB</text>
    <text class="note" x="140" y="64" text-anchor="middle">OHLCV · indicadores · audit log</text>
  </g>

  <g transform="translate(440,360)">
    <rect class="box" x="0" y="0" width="270" height="90" />
    <text class="title" x="135" y="24" text-anchor="middle">Dashboard</text>
    <text class="text" x="135" y="44" text-anchor="middle">Gráficos · Heatmaps · Alertas</text>
    <text class="note" x="135" y="64" text-anchor="middle">Paper-trade · KPIs · Drift</text>
  </g>

  <!-- Arrows Row 1 -->
  <path class="arrow" d="M 200 80 L 230 80" />
  <path class="arrow" d="M 440 80 L 470 80" />
  <path class="arrow" d="M 700 80 L 730 80" />

  <!-- Down arrows to Sinais and Fila -->
  <path class="arrow" d="M 845 120 L 845 200" />
  <path class="arrow" d="M 585 120 L 585 200" />

  <!-- Row 2 arrows -->
  <path class="arrow" d="M 350 240 L 380 240" />
  <path class="arrow" d="M 590 240 L 610 240" />

  <!-- From Execução back to Exchanges (implicit) and to Persistência -->
  <path class="arrow" d="M 715 280 L 715 360" />

  <!-- From Indicadores to Persistência -->
  <path class="arrow" d="M 845 120 L 845 360" />

  <!-- From Persistência to Dashboard -->
  <path class="arrow" d="M 400 405 L 440 405" />

  <!-- From Sinais to Dashboard (alerts) -->
  <path class="arrow" d="M 235 280 L 235 360" />

  <!-- Notes -->
  <text class="note" x="470" y="18" text-anchor="middle">Processamento após fechamento (UTC)</text>
  <text class="note" x="500" y="330" text-anchor="middle">Idempotência em filas e armazenamento</text>
</svg>